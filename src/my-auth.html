<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="./redux-mixin.html">
<link rel="import" href="./actions/authAction.html">
<script type="application/javascript" src="../node_modules/lodash/lodash.min.js"></script>
<dom-module id="my-auth">

    <script>
      
        class myAuth extends ReduxMixin(Polymer.Element) {
         
            static get is() {
                return 'my-auth';
            }
            ready(){
                super.ready();
                // this.checkUser();
            }
            getUser(){
                var user = JSON.parse(localStorage.getItem('user'));
                if(user) return _.omit(user,['token','success','status']);
                else return {};
            }
            checkUser(){
                // console.log(this.getUser())
                // conssole.log('test')
                var user = this.getUser();
                if(Object.keys(user).length){
                    this.dispatch({type:'AUTH_SET_USER',payload:user})
                    return true;
                }
                else {
                    return false;
                }
            }

        }

        window.customElements.define(myAuth.is, myAuth);
    </script>
</dom-module>